<!doctype html>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="width=device-width, initial-scale=1" name="viewport" />

         <!-- update the version number as needed -->
        <script defer src="/__/firebase/10.14.1/firebase-app-compat.js"></script>
    <!-- include only the Firebase features as you need -->
        <script defer src="/__/firebase/10.14.1/firebase-auth-compat.js"></script>
        <script defer src="/__/firebase/10.14.1/firebase-database-compat.js"></script>

        <script defer src="/__/firebase/init.js?useEmulator=true"></script>
        <link id="pageStyles" rel="stylesheet" href="/todo.css"/>
        
    </head>
 <body>
    <div id="toDo-page">
        <div id="headerArea">
            <header id="title">To Do List:</header>
            <a href="index.html">
                <button id="logOut">Log Out</button>
            </a>
        </div>
        
        <form id="inputForm">
            <div id="newEntryBox">
                <input id="inputBox" type="textarea" name="name" placeholder="New Entry Here">
                <input id="addTask" type="submit" value="✓">
            </div>
            <ul id="listBox">
                <div class="item" id="item1">
                
                </div>
            </ul>

        <script>
            userId = localStorage.getItem('userId');
            document.addEventListener('DOMContentLoaded', function() {
              firebase.database().ref('users/' + userId + '/todo').on('value', snapshot => {
                  let data = snapshot.val();
                  document.getElementById("listBox").innerText= data;
               });
              
            });
          </script> 
          </form>
          <Button id="editButton">✎</Button>
          <Button id="deleteButton">X</Button>
    </div>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
        //import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-analytics.js";
        const firebaseConfig = {
          apiKey: "AIzaSyDR-KgyPWiGSM7kz2dioVVWlFZO1g35SvE",
          authDomain: "cpeg470-proj1-2b1ec.firebaseapp.com",
          databaseURL: "https://cpeg470-proj1-2b1ec-default-rtdb.firebaseio.com",
          projectId: "cpeg470-proj1-2b1ec",
          storageBucket: "cpeg470-proj1-2b1ec.appspot.com",
          messagingSenderId: "900830850408",
          appId: "1:900830850408:web:f47604d97db5457b5c3add",
          measurementId: "G-N41B7W2X03"
        };
  
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        import { getDatabase, ref, set, onValue, child, get, push, update } from 'https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js';
  
        //const analytics = getAnalytics(app);
        const db = getDatabase(app);

        let inputBox = document.getElementById("inputBox");
        let addTask = document.getElementById("addTask");
        let listBox = document.getElementById("listBox");

        const userId = localStorage.getItem('userId');
        //console.log("userId " + userId); 

        function AddTask(){

        }

        function EditTask(){

        }

        function DeleteTask(){

        }

        </script>
</body>